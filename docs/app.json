[{"name":"app.R","content":"# app.R\r\n# Explicit deklaration av alla nödvändiga paket\r\nif (!require(shiny)) install.packages(\"shiny\")\r\nif (!require(leaflet)) install.packages(\"leaflet\")\r\nif (!require(maps)) install.packages(\"maps\")\r\nif (!require(shinylive)) install.packages(\"shinylive\")\r\n\r\nlibrary(shiny)\r\nlibrary(leaflet)\r\nlibrary(maps)\r\nlibrary(shinylive)\r\n\r\n# Resten av koden förblir oförändrad\r\nui <- fluidPage(\r\n  titlePanel(\"Interaktiv Karta med Mapview\"),\r\n  sidebarLayout(\r\n    sidebarPanel(\r\n      selectInput(\"dataset\", \"Välj dataset:\",\r\n                  choices = c(\"Världsstäder\" = \"cities\",\r\n                              \"Quakes\" = \"quakes\"))\r\n    ),\r\n    mainPanel(\r\n      leafletOutput(\"map\")\r\n    )\r\n  )\r\n)\r\n\r\nserver <- function(input, output, session) {\r\n  \r\n  observe({\r\n    req(input$dataset)\r\n    \r\n    output$map <- renderLeaflet({\r\n      if (input$dataset == \"cities\") {\r\n        data <- maps::world.cities  # Begränsa till 1000 städer för bättre prestanda\r\n        m <- leaflet(data) %>%\r\n          addTiles() %>%\r\n          addCircleMarkers(\r\n            ~long, ~lat, \r\n            radius = ~sqrt(pop)/100,\r\n            popup = ~paste(name, \"<br>Population:\", pop)\r\n          )\r\n      } else {\r\n        data <- quakes\r\n        m <- leaflet(data) %>%\r\n          addTiles() %>%\r\n          addCircleMarkers(\r\n            ~long, ~lat, \r\n            radius = ~mag * 2,\r\n            popup = ~paste(\"Magnitude:\", mag, \"<br>Depth:\", depth)\r\n          )\r\n      }\r\n      m\r\n    })\r\n  })\r\n}\r\n\r\n# Kör appen\r\nshinyApp(ui = ui, server = server)\r\n","type":"text"},{"name":"index.html","content":"\"Hello world\"","type":"text"},{"name":"jl98swe.github.io.Rproj","content":"Version: 1.0\r\n\r\nRestoreWorkspace: Default\r\nSaveWorkspace: Default\r\nAlwaysSaveHistory: Default\r\n\r\nEnableCodeIndexing: Yes\r\nUseSpacesForTab: Yes\r\nNumSpacesForTab: 2\r\nEncoding: UTF-8\r\n\r\nRnwWeave: Sweave\r\nLaTeX: pdfLaTeX\r\n","type":"text"}]
